AWSTemplateFormatVersion: '2025-03-21'
Resources:
  FindAvailableSlots:
    Type: AWS::Lambda::Function
    Properties:
      Handler: findAvailableSlotsHandler.handler
      # Role: !GetAtt LambdaExecutionRole.Arn
      Runtime: nodejs20.x
  LambdaSchedule:
    Type: "AWS::Events::Rule"
    Properties:
      Description: >
        A schedule for the Lambda function..
      ScheduleExpression: "rate(7 days)"
      State: ENABLED
      Targets:
        - Arn: !Sub ${FindAvailableSlots.Arn}
          Id: LambdaSchedule

  # LambdaExecutionRole:
  #   Type: AWS::IAM::Role
  #   Properties:
  #     AssumeRolePolicyDocument:
  #       Version: '2012-10-17'
  #       Statement:
  #         - Effect: Allow
  #           Principal:
  #             Service:
  #               - lambda.amazonaws.com
  #           Action:
  #             - sts:AssumeRole
  #     Path: /
  #     Policies:
  #       - PolicyName: root
  #         PolicyDocument:
  #           Version: '2012-10-17'
  #           Statement:
  #             - Effect: Allow
  #               Action:
  #                 - logs:*
  #               Resource: arn:aws:logs:*:*:*